<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Class: Router - Just js</title><link type="text/css" rel="stylesheet" href="css/jsdoc-template.css"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" type="image/png" href="/img/favicon-16x16.png"><link rel="stylesheet" href="../css/jsdoc.css"></head><body data-gs='{"openPageHeader": "is-page-header-open", "searching": "is-searching"}'><div id="page-wrapper"><header id="page-header" data-gs-target="openPageHeader"><div id="logo"><a href="/"><img src="/img/logo-white-64x64.png" alt="Logo" srcset="/img/logo-white-128x128.png 2x"></a></div><nav id="content-nav"><header><div id="search"><div class="textfield-wrapper"><input type="search" name="q" placeholder="Search..." data-internal-search="#content-nav li a" data-gs-search="searching"></div></div></header><h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><abbr title="Namespace">NS</abbr> <a href="just.access.html">access</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.addEventListener.html">addEventListener</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.ajax.html">ajax</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.check.html">check</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.create.html">create</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.createElement.html">createElement</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.defaults.html">defaults</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.defineProperties.html">defineProperties</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.defineProperty.html">defineProperty</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.defProp.html">defProp</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.defProps.html">defProps</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.deprecate.html">deprecate</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.eachProp.html">eachProp</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.eachProperty.html">eachProperty</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.el.html">el</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.emptyObj.html">emptyObj</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.findElements.html">findElements</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.from.html">from</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.getRemoteParent.html">getRemoteParent</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.is.html">is</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.isEmptyObject.html">isEmptyObject</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.isTouchSupported.html">isTouchSupported</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.isWindow.html">isWindow</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.load.html">load</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.loadElement.html">loadElement</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.off.html">off</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.on.html">on</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.parent.html">parent</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.parseJSON.html">parseJSON</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.parseUrl.html">parseUrl</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.prop.html">prop</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.removeEventListener.html">removeEventListener</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.request.html">request</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.stringToJSON.html">stringToJSON</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.supportsTouch.html">supportsTouch</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.toJSON.html">toJSON</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.toObj.html">toObj</a></li><li><abbr title="Namespace">NS</abbr> <a href="just.toObjectLiteral.html">toObjectLiteral</a></li></ul><h3>Classes</h3><ul><li><abbr title="Class">Cls</abbr> <a href="just.ClassList.html">ClassList</a></li><li><abbr title="Class">Cls</abbr> <a href="just.Def.html">Def</a></li><li><abbr title="Class">Cls</abbr> <a href="just.Define.html">Define</a></li><li><abbr title="Class">Cls</abbr> <a href="just.LocalStorage.html">LocalStorage</a></li><li><abbr title="Class">Cls</abbr> <a href="just.Router.html">Router</a></li></ul><h3>Mixins</h3><ul><li><abbr title="Mixin">Mix</abbr> <a href="just.html">just</a></li></ul><h3>Global</h3><ul><li><abbr title="Global">Glo</abbr> <a href="global.html#t">t</a></li></ul></nav></header><div id="main-wrapper"><button id="page-header-opener" title="Toggle left bar" class="has-icon" data-css-icon="menu" type="button" data-gs-toggle="openPageHeader">Toggle left bar</button><main id="content"><header><h1 id="content-title">Class: Router</h1></header><article class="doc" data-kind="class" id="Router"><header><h2><span class="attribs"><span class="type-signature"></span></span> <span class="ancestors"><a href="just.html">just</a>.</span><a href="#Router">Router</a><span class="signature">()</span><span class="type-signature"></span></h2></header><div class="container-overview"><div id="Router" class="method member"><div class="description">Route a SPA easily.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2659">line 2659</a></dd></dl><h3>Example</h3><div class="example-wrapper"><figure class="example"><figcaption class="code-caption" hidden><b>Example 1.</b></figcaption><pre class="prettyprint"><code>// routes/router.js
const router = new Router();

export default router;

// routes/home.js
import router from './router.js';

router.route('home', {
    'pathname': '/',
    'search': /\breload=([^&amp;]+)/
}, (event, {route, data}) => {

    const {action, by} = route;
    let reload;

    if (by === 'search') {
        reload = RegExp.$1;
    }

    if (/init|popstate/.test(action)) {
        // @TODO Call controllers.
    }

});</code></pre></figure></div></div></div><h3 class="subsection-title">Methods</h3><div id=".changeState" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#.changeState">changeState</a><span class="signature">(action, url)</span><span class="type-signature"> &rarr; {boolean}</span></h4><div class="description">Call a <var>window.history</var>'s function if available. Otherwise, change the current url using <var>location.hash</var> and prepending a hashbang (#!) to the url state.<aside class="note"><p>Note: This function does not accept any arguments for pushState/replaceState because it's only intended to change the url without reloading.</p></aside></div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2764">line 2764</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>action</var><br></th><td class="type"><span class="param-type">string</span></td><td class="description last">"pushState" or "replaceState".</td></tr><tr><th class="name" scope="row"><var>url</var><br></th><td class="type"><span class="param-type"><a href="global.html#url">url</a></span></td><td class="description last">A same-origin url.</td></tr></tbody></table></div><h5>Returns:</h5><div class="param-desc">`false` if something fails, `true` otherwise.</div><dl><dt>Type</dt><dd><span class="param-type">boolean</span></dd></dl></div><div id=".pushState" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#.pushState">pushState</a><span class="signature">(url)</span><span class="type-signature"> &rarr; {boolean}</span></h4><div class="description">Do a <var>history.pushState</var> calling <a href="just.Router.html#.changeState">just.Router.changeState</a>.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2800">line 2800</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>url</var><br></th><td class="type"><span class="param-type"><a href="global.html#url">url</a></span></td><td class="description last"><a href="just.Router.html#.changeState">just.Router.changeState</a>'s url param.</td></tr></tbody></table></div><h5>Returns:</h5><div class="param-desc"><a href="just.Router.html#.changeState">just.Router.changeState</a>'s returned value.</div><dl><dt>Type</dt><dd><span class="param-type">boolean</span></dd></dl></div><div id=".replaceState" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#.replaceState">replaceState</a><span class="signature">(url)</span><span class="type-signature"> &rarr; {boolean}</span></h4><div class="description">Do a <var>history.replaceState</var> calling <a href="just.Router.html#.changeState">just.Router.changeState</a>.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2789">line 2789</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>url</var><br></th><td class="type"><span class="param-type"><a href="global.html#url">url</a></span></td><td class="description last"><a href="just.Router.html#.changeState">just.Router.changeState</a>'s url param.</td></tr></tbody></table></div><h5>Returns:</h5><div class="param-desc"><a href="just.Router.html#.changeState">just.Router.changeState</a>'s returned value.</div><dl><dt>Type</dt><dd><span class="param-type">boolean</span></dd></dl></div><div id="change" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#change">change</a><span class="signature">(action, url, data, eventInit)</span><span class="type-signature"></span></h4><div class="description">Do a <a href="just.Router.html#.changeState">just.Router.changeState</a> and trigger an action if it succeds.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line3044">line 3044</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>action</var><br></th><td class="type"><span class="param-type">string</span></td><td class="description last">A valid <a href="just.Router.html#.changeState">just.Router.changeState</a>'s action.</td></tr><tr><th class="name" scope="row"><var>url</var><br></th><td class="type"><span class="param-type"><a href="global.html#url">url</a></span></td><td class="description last">The new url.</td></tr><tr><th class="name" scope="row"><var>data</var><br></th><td class="type"><span class="param-type">Any</span></td><td class="description last">Some data.</td></tr><tr><th class="name" scope="row"><var>eventInit</var><br></th><td class="type"><span class="param-type">CustomEventInit</span></td><td class="description last">Options for the event.</td></tr></tbody></table></div></div><div id="push" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#push">push</a><span class="signature">(url, data)</span><span class="type-signature"></span></h4><div class="description">Trigger a "pushState" action by calling <a href="just.Router.html#change">just.Router#change</a>.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line3063">line 3063</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>url</var><br></th><td class="type"><span class="param-type"><a href="global.html#url">url</a></span></td><td class="description last"><a href="just.Router.html#change">just.Router#change</a>'s url argument.</td></tr><tr><th class="name" scope="row"><var>data</var><br></th><td class="type"><span class="param-type">Any</span></td><td class="description last"><a href="just.Router.html#change">just.Router#change</a>'s data argument.</td></tr><tr><th class="name" scope="row"><var></var><br></th><td class="type"><span class="param-type">CustomEventInit</span></td><td class="description last"><a href="just.Router.html#change">just.Router#change</a>'s eventInit argument.</td></tr></tbody></table></div></div><div id="replace" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#replace">replace</a><span class="signature">(url, data)</span><span class="type-signature"></span></h4><div class="description">Trigger a "replaceState" action by calling <a href="just.Router.html#change">just.Router#change</a>.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line3076">line 3076</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>url</var><br></th><td class="type"><span class="param-type"><a href="global.html#url">url</a></span></td><td class="description last"><a href="just.Router.html#change">just.Router#change</a>'s url argument.</td></tr><tr><th class="name" scope="row"><var>data</var><br></th><td class="type"><span class="param-type">Any</span></td><td class="description last"><a href="just.Router.html#change">just.Router#change</a>'s data argument.</td></tr><tr><th class="name" scope="row"><var></var><br></th><td class="type"><span class="param-type">CustomEventInit</span></td><td class="description last"><a href="just.Router.html#change">just.Router#change</a>'s eventInit argument.</td></tr></tbody></table></div></div><div id="route" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#route">route</a><span class="signature">(id, path, handler, options<span class="signature-attributes">non-null</span>)</span><span class="type-signature"></span></h4><div class="description">Define a route, attach listeners (for "popstate" and custom events), and trigger an "init" event.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2972">line 2972</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>id</var><br></th><td class="type"><span class="param-type">string</span></td><td class="description last">Some unique string to identify the current route.</td></tr><tr><th class="name" scope="row"><var>path</var><br></th><td class="type"><span class="param-type">string</span> or <span class="param-type">RegExp</span> or <span class="param-type">object</span></td><td class="description last">A value that will match the current location. A string/RegExp is the same as passing {"pathname": string/RegExp}. An object must contain any <var>window.location</var>'s keys, like "search", "hash", ...</td></tr><tr><th class="name" scope="row"><var>handler</var><br></th><td class="type"><span class="param-type">function</span></td><td class="description last">Some function that will be called when the route matches the current url.</td></tr><tr><th class="name" scope="row"><var>options</var><br></th><td class="type"><span class="param-type">object</span></td><td class="description last"><h6>Properties</h6><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Default</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>ignore</var><br><sub class="attributes">[optional]</sub></th><td class="type"><span class="param-type"><a href="just.Router.html#~route_ignore">just.Router~route_ignore</a></span></td><td class="default">allowEverything()</td><td class="description last"></td></tr><tr><th class="name" scope="row"><var>only</var><br><sub class="attributes">[optional]</sub></th><td class="type"><span class="param-type"><a href="just.Router.html#~route_only">just.Router~route_only</a></span></td><td class="default">allowEverything()</td><td class="description last"></td></tr><tr><th class="name" scope="row"><var>actions</var><br><sub class="attributes">[optional]</sub></th><td class="type"><span class="param-type">Array</span></td><td class="default"></td><td class="description last">An array of allowed actions. You can pass an array of string/RegExps.</td></tr><tr><th class="name" scope="row"><var>event</var><br><sub class="attributes"></sub></th><td class="type"><span class="param-type">object</span></td><td class="default"></td><td class="description last"><h6>Properties</h6><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Default</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>name</var><br><sub class="attributes">[optional]</sub></th><td class="type"><span class="param-type">string</span></td><td class="default">`just:Router:route:${id}`</td><td class="description last">event.type for the CustomEvent.</td></tr></tbody></table></div></td></tr><tr><th class="name" scope="row"><var>event-target</var><br><sub class="attributes">[optional]</sub></th><td class="type"><span class="param-type">Node</span></td><td class="default">document</td><td class="description last">The element to attach the event to.</td></tr><tr><th class="name" scope="row"><var>event.init</var><br><sub class="attributes"></sub></th><td class="type"><span class="param-type">CustomEventInit</span></td><td class="default"></td><td class="description last">Values for the CustomEvent's eventInit argument. You can pass custom values for the "init" event in here.<h6>Properties</h6><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>detail</var><br></th><td class="type"><span class="param-type">object</span></td><td class="description last"><h6>Properties</h6><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Default</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>data</var><br><sub class="attributes">[optional]</sub></th><td class="type"><span class="param-type">Any</span></td><td class="default">null</td><td class="description last">Custom data for the "init" event.</td></tr><tr><th class="name" scope="row"><var>route</var><br><sub class="attributes"></sub></th><td class="type"><span class="param-type">object</span></td><td class="default"></td><td class="description last">Internal properties.<h6>Properties</h6><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Default</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>by</var><br><sub class="attributes">[optional] [nullable]</sub></th><td class="type"><span class="param-type">string</span></td><td class="default">null</td><td class="description last">A <var>window.location</var> key that matched the route ("pathname", ...).</td></tr><tr><th class="name" scope="row"><var>action</var><br><sub class="attributes">[optional] [nullable]</sub></th><td class="type"><span class="param-type">string</span></td><td class="default">null</td><td class="description last">The triggered action to call this route. Actions triggered by default include "init" and "popstate".</td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></div><div id="trigger" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#trigger">trigger</a><span class="signature">(action, data, eventInit)</span><span class="type-signature"></span></h4><div class="description">Call a custom action on the current route by triggering a CustomEvent on each given route.</div><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2894">line 2894</a></dd></dl><h5>Parameters:</h5><div class="table-wrapper"><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><th class="name" scope="row"><var>action</var><br></th><td class="type"><span class="param-type">string</span></td><td class="description last">Some string.</td></tr><tr><th class="name" scope="row"><var>data</var><br></th><td class="type"><span class="param-type">Any</span></td><td class="description last">Data for the triggered event.</td></tr><tr><th class="name" scope="row"><var>eventInit</var><br></th><td class="type"><span class="param-type">CustomEventInit</span></td><td class="description last">Options for CustomEvent's eventInit argument.</td></tr></tbody></table></div><h5>Examples</h5><div class="example-wrapper"><figure class="example"><figcaption class="code-caption"><b>Example 1.</b></figcaption><pre class="prettyprint"><code>import router from 'routes/router.js';

router.route('all', /./, (e, {route, data}) => {

    const {action} = route;

    if (action === 'my-action') {
        console.log(`triggered ${data} on any route!`); // > "triggered my-data on any route!"
    }

});

router.route('home', '/', () => {

    if (action === 'my-action') {
        // ignored.
    }

});

router.constructor.pushState('/item');
router.trigger('my-action', 'my-data');</code></pre></figure></div><div class="example-wrapper"><figure class="example"><figcaption class="code-caption"><b>Example 2:</b> You can go even further by converting all anchors on your html into actions.</figcaption><pre class="prettyprint"><code>// index.html with "/item/a/b/c" as a url.
&lt;a href='#close'>&lt;/a>

// controllers/item.js
function closeItem ({event, target}) {
    console.log("I'm closing...");
    // @TODO Close.
}

export {closeItem as close}

// routes/item.js
import router from 'router.js';
import * as controller from '../controllers/item.js';

router.route('item', {
    'pathname': /^\/item\//,
    'hash': /^#!\/item\// // Set backwards compability.
}, (e, {route, data}) => {

    if (action === 'close') {
        controller.close(data);
    }

});

// listeners/link.js
import router from 'routes/router.js';

// This is only for demostration purposes.
just.on(document, 'click', (event) => {

    const {target} = event;
    const {hash} = target;

    if (hash) {

        let action = hash.slice(1);
        let data = {'event': e, target};

        router.trigger(action, data);

    }

});

// Then, click an anchor link and the corresponding controller
// will be called.</code></pre></figure></div></div><h3 class="subsection-title">Type Definitions</h3><div id="~route_ignore" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#~route_ignore">route_ignore</a><span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2929">line 2929</a></dd></dl><h5>This:</h5><p>{just.Router~route}</p><h5>Returns:</h5><div class="param-desc">If `true`, the route won't be called.</div><dl><dt>Type</dt><dd><span class="param-type">boolean</span></dd></dl></div><div id="~route_only" class="method member"><h4 class="name"><span class="type-signature"></span><a href="#~route_only">route_only</a><span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4><dl class="details"><dt class="tag-source">Source:</dt><dd class="tag-source"><a href="just.js.html">just.js</a>, <a href="just.js.html#line2936">line 2936</a></dd></dl><h5>This:</h5><p>{just.Router~route}</p><h5>Returns:</h5><div class="param-desc">If `true`, the route will be called.</div><dl><dt>Type</dt><dd><span class="param-type">boolean</span></dd></dl></div></article></main><footer id="page-footer"><small>Documentation generated by <a href="https://github.com/jsdoc/jsdoc" rel="noreferrer noopener" target="_blank">JSDoc 3.6.6</a>.</small> <small style="margin-left:1em">Design by <a href="https://github.com/AlexisPuga" target="_blank" rel="noopener noreferrer">Alexis Puga</a>.</small></footer></div></div><script src="js/jsdoc-template.js" async></script><script src="js/prettify.min.js" async></script><link rel="stylesheet" type="text/css" href="css/tomorrow.min.css"></body></html>